{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{Button,MenuItem,Modal,Select}from'@mui/material';import\"./admin.css\";import Logout from'@mui/icons-material/Logout';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const App=()=>{const[attendance,setAttendance]=useState([]);const[selectedId,setSelectedId]=useState(null);const[open,setOpen]=useState(false);const[status,setStatus]=useState('present');// Default status\nfunction formatDate(dateString){const date=new Date(dateString);const year=date.getFullYear();const month=String(date.getMonth()+1).padStart(2,'0');const day=String(date.getDate()).padStart(2,'0');return\"\".concat(year,\"-\").concat(month,\"-\").concat(day);}const handleEdit=id=>{setSelectedId(id);setOpen(true);};const handleClose=()=>{setOpen(false);};useEffect(()=>{const fetchAttendance=async()=>{try{const response=await axios.get('http://localhost:5000/api/attendanceRecord');setAttendance(response.data);}catch(error){console.error('Error fetching attendance records:',error);}};fetchAttendance();},[]);const handleSetStatus=async()=>{try{await axios.post(\"http://localhost:5000/api/attendance/\".concat(selectedId),{status});// Refresh attendance data after updating status\nsetOpen(false);window.location.reload();}catch(error){console.error('Error updating attendance record status:',error);}};const handleLogout=()=>{window.location.href='/';};return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-cont\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"ADMIN\"}),/*#__PURE__*/_jsx(Logout,{onClick:handleLogout}),/*#__PURE__*/_jsxs(\"div\",{className:\"table-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Attendance Records\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"User ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:attendance.map(record=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:record.userId}),/*#__PURE__*/_jsx(\"td\",{children:formatDate(record.date)}),/*#__PURE__*/_jsx(\"td\",{children:record.status}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(record._id),children:\"Edit\"})})]},record._id))})]}),/*#__PURE__*/_jsx(Modal,{open:open,onClose:handleClose,className:\"modal-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Set Attendance Status\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Select,{value:status,onChange:e=>setStatus(e.target.value),children:[/*#__PURE__*/_jsx(MenuItem,{value:\"present\",children:\"Present\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"absent\",children:\"Absent\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:handleSetStatus,children:\"Save\"})]})]})})]})]});};export default App;","map":{"version":3,"names":["React","useState","useEffect","axios","Button","MenuItem","Modal","Select","Logout","jsx","_jsx","jsxs","_jsxs","App","attendance","setAttendance","selectedId","setSelectedId","open","setOpen","status","setStatus","formatDate","dateString","date","Date","year","getFullYear","month","String","getMonth","padStart","day","getDate","concat","handleEdit","id","handleClose","fetchAttendance","response","get","data","error","console","handleSetStatus","post","window","location","reload","handleLogout","href","className","children","onClick","map","record","userId","_id","onClose","value","onChange","e","target"],"sources":["D:/ass/frontend/src/pages/adminPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { Button, MenuItem, Modal, Select } from '@mui/material';\r\nimport \"./admin.css\"\r\nimport Logout from '@mui/icons-material/Logout';\r\n\r\n\r\nconst App = () => {\r\n  const [attendance, setAttendance] = useState([]);\r\n  const [selectedId, setSelectedId] = useState(null);\r\n  const [open, setOpen] = useState(false);\r\n  const [status, setStatus] = useState('present'); // Default status\r\n\r\n  function formatDate(dateString) {\r\n    const date = new Date(dateString);\r\n    const year = date.getFullYear();\r\n    const month = String(date.getMonth() + 1).padStart(2, '0');\r\n    const day = String(date.getDate()).padStart(2, '0');\r\n    return `${year}-${month}-${day}`;\r\n  }\r\n\r\n  const handleEdit = (id) => {\r\n    setSelectedId(id);\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchAttendance = async () => {\r\n      try {\r\n        const response = await axios.get('http://localhost:5000/api/attendanceRecord');\r\n        setAttendance(response.data);\r\n      } catch (error) {\r\n        console.error('Error fetching attendance records:', error);\r\n      }\r\n    };\r\n\r\n    fetchAttendance();\r\n  }, []);\r\n\r\n  const handleSetStatus = async () => {\r\n    try {\r\n      await axios.post(`http://localhost:5000/api/attendance/${selectedId}`, { status });\r\n      // Refresh attendance data after updating status\r\n      setOpen(false);\r\n      window.location.reload();\r\n\r\n    } catch (error) {\r\n      console.error('Error updating attendance record status:', error);\r\n    }\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    \r\n    window.location.href = '/'; \r\n    \r\n    \r\n  };\r\n\r\n  return (\r\n    <div className='admin-cont'>\r\n\r\n        <h1>ADMIN</h1>\r\n        <Logout onClick={handleLogout} />\r\n    <div className=\"table-container\">\r\n    <h1>Attendance Records</h1>\r\n    <table>\r\n      <thead>\r\n        <tr>\r\n           \r\n          <th>User ID</th>\r\n          <th>Date</th>\r\n          <th>Status</th>\r\n          <th>Action</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {attendance.map(record => (\r\n          <tr key={record._id}>\r\n            \r\n            <td>{record.userId}</td>\r\n            <td>{formatDate(record.date)}</td>\r\n            <td>{record.status}</td>\r\n            <td>\r\n              <button onClick={() => handleEdit(record._id)}>Edit</button>\r\n            </td>\r\n          </tr>\r\n        ))}\r\n      </tbody>\r\n    </table>\r\n    <Modal open={open} onClose={handleClose} className=\"modal-container\">\r\n      <div className='modal-content'>\r\n        <h2>Set Attendance Status</h2>\r\n        <div>\r\n          <Select\r\n            value={status}\r\n            onChange={(e) => setStatus(e.target.value)}\r\n          >\r\n            <MenuItem value=\"present\">Present</MenuItem>\r\n            <MenuItem value=\"absent\">Absent</MenuItem>\r\n          </Select>\r\n          <button className='btn' onClick={handleSetStatus}>Save</button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  </div>\r\n  </div>\r\n  \r\n  );\r\n};\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}